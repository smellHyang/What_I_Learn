# Message Queue

## 1. MQ란?

- 메시지 기반의 미들웨어로 여러 서비스를 연결해준다
- MOM(Message Oriented Middleware)의 구현으로 비동기 메시지를 사용하는 서비스들 사이에서 데이터를 교환해주는 역할
    
    ![image](https://user-images.githubusercontent.com/73684562/174432586-89fd9729-278f-4c37-a9de-4f091f739fc1.png)
    
- 생산자가 메시지를 큐에 전송하면 소비자가 큐를 처리해준다.
- 1:1 통신방식
- 사용처
    - 이메일 - 비밀번호 재설정, 회원가입
    - 블로그 포스팅 - 업로드한 이미지 사후처리 후 최적화

## 2. 목적

- 어플리케이션 및 시스템간의 통신
    - 시스템 장애 발생 시 서버가 down되면 Server-Client간 처리 어려움
    - Server는 다운타임동안 Client에게 직접 요청하지 못함
    - 직접 요청 대신 MQ에 전달하여 데이터 처리
- 대용량 처리
    - 동시에 해야할 양이 많으니 처리해야할 작업을 MQ에 넣어두고 서버는 처리할수 있는 양만 처리 후 다음 MQ에서 또 가져와서 처리
    - 부하분산 처리 가능
- 데이터 손실 방지
    - 서버 다운시 메모리에 쌓아둔 데이터는 손실된다.
    - 일정시간이 지나도록 처리했다고 MQ에 알려주지 않으면 MQ는 이 작업을 다시 큐에 넣어 처리할수 있도록한다.

## 3. 장점

- 비동기 - 나중에 처리 가능
- 애플리케이션과 분리 가능
- 일부 실패 시 전체에 영향을 주지 않고 재실행가능

## 4. MOM(Message Oriented Middleware)

- 메시지 API를 통해 분산되어 있는 애플리케이션 간에 데이터를 교환할 수 있도록 하는 미들웨어
- 분산되어있는 시스템간의 결합성 down
- 비동기식 데이터 교환
