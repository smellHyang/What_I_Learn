# 쿠키

1. 쿠키? 
    - 웹사이트 접속 시 브라우저에 사용자의 정보가 저장되는 텍스트 파일
    - 클라이언트 로컬에 저장되는 key-value형태의 데이터 파일
    - 웹사이트는 쿠키를 통해 사용자를 인식하고 과거 이용내역에 대한 일부 데이터를 저장해 놓는다.
    
2. 목적
    - 세션관리
        - 서버에 저장해야할 로그인, 장바구니 등 정보관리
    - 개인화
        - 사용자 선호, 테마 등
    - 트래킹
        - 사용자의 행동을 기록하고 분석
3. 구성 요소 
    - 쿠키 이름
    - 쿠키 값
    - 만료날짜/시간(쿠키 저장기간)
    - 경로정보
    
4. 동작 방식
    
    ![Untitled](%E1%84%8F%E1%85%AE%E1%84%8F%E1%85%B5%20c3986835dff14be1b556da09b8089535/Untitled.png)
    
    - 클라이언트가 페이지를 요청한다(사용자가 웹페이지에 접속)
    - 서버는 쿠키를 생성한다
    - 생성한 쿠키에 정보를 담아서 클라에게 http화면과 같이 돌려준다.
    - 넘겨받은 쿠키는 클라이언트가 가지고 있다가(로컬pc에저장) 다시 서버에 요청할 때 요청과 함께 쿠키를 전송한다.
    - 동일 사이트 재 방문 시 클라이언트의 pc에 해당쿠키가 있는경우, 요청 페이지와 함께 ㄱ쿠키를 전송한다.
    
    +) 쿠키는 기간이 정해져 있고 명시적으로 지우지 않는다면 계속 남아있다.
    
5. 보안이슈
    - XSS을 통한 cookie hijacking
        - 자바스크립트를 이용하여 document.cookie값을 탈취할 수 있음
    - 스니핑공격
        - 네트워크를 통해 전송되는 쿠키값을 암호화하지않고 전송하는 경우 네트워크 스니핑공격을 통해 쿠키값을 탈취 할 수 있다.
        
        <aside>
        💡 스니핑? 네트워크 중간에서 남의 패킷정보를 도청하는 해킹 유형 중 하나
        
        </aside>
        
    - 공용 pc에서 쿠키값 유출
        - 영속성 쿠키는 하드디스크에 저장되며, 간단한 방법으로 접근가능하기 때문에 공용pc 사용시 pc에 저장된 사용자 정보가 유출될 수 있다.
    - 쿠키에 대한 정보를 헤더에 추가하여 보내기 때문에 상탕한 트래픽을 발생시킨다.
    
    [쿠키 보안 이슈](%E1%84%8F%E1%85%AE%E1%84%8F%E1%85%B5%20%E1%84%87%E1%85%A9%E1%84%8B%E1%85%A1%E1%86%AB%20%E1%84%8B%E1%85%B5%E1%84%89%E1%85%B2%20ab09b2a833124b03a81f4e4d899f1bed.md)