# docker & kubernetes

## 1. docker

- 컨테이너 기반의 오픈소스 가상화 플랫폼
- 한개의 컨테이너를 관리하는데 최적
- 이미지를 컨테이너에 띄우고 실행

<aside>
💡 이미지 : 컨테이너 실행에 필요한 파일과 설정값을 포함

</aside>

### 1-1. 컨테이너란?

- 어떤 물체를 격리하는 공간
- 어플리케이션과 어플리케이션을 구동하는 환경을 격리한 공간

### 1-2. 컨테이너 사용이유?

![image](https://user-images.githubusercontent.com/73684562/177050989-8dadf014-c941-4fba-b078-efa795e916bb.png)

- VM(Virtual Machine) 가상머신
    - 다수의 운영체제를 실행하기 위해 hypervisor가 필요하고 그 위에 GuestOS가 각각 설치된 가상머신 구동
    - 모든 자원을 사용
- Container
    - 서버 - Host OS - Docker Engine - Container
    - hypervisor를 사용하지 않고 운영체제 자원을 필요한 만큼만 격리하여 컨테이너에 할당

### 1-3. 장점

- 빠른 실행환경 및 속도
- 배포의 신속성 및 H/W 효율
- 여러 어플리케이션의 독립성과 확장성

### 1-4. 단점

- 리눅스 친화적
- 개발 초기의 러닝비용

## 2. 쿠버네티스

- 컨테이너 오케스트레이션 플랫폼
- 컨테이너들을 관리

### 2-1. 기능

- 스케쥴링
    - 컨테이너를 가장 여유로운 노드에 배치
    - 작업노드가 죽으면 실행중이던 컨테이너를 다른 노드에 옮겨주는 역할
- 클러스터링
    - 여러개의 노드를 묶어서 하나처럼 사용
    - 모든 컨테이너는 내부통신 가능
- 서비스 디스커버리
    - 컨테이너가 어디에 배치되었는지 자동으로 찾아준다.
- 로깅 및 모니터링
    - 로그를 관리하고 직접 다른툴을 사용하여 모니터링 가능

### 2-2. 장점

- 무중단 서비스 제공
    - 자기 회복 기능이 있어 특정 컨테이너에 장애발생 시 복제 컨테이너를 생성하여 서비스를 유지
- Vendor Lock In 해결
    - vendor간 호환성 문제로 이전하기 어려울때 쿠버네티스는 도커 컨테이너 기반이기 때문에 특정업체에 종속되지 않고 클라우드 환경 이전 가능

+) **Docker file을 사용하다보면 Linux위에 Centos나 Ubuntu를 깔기도 하던데, 그러면 Guest OS를 설치하는 게 아닌가요?**

 Host OS가 Linux고 컨테이너의 Base Image를 Centos로 구동하게 되면, Linux와 Centos의 다른 부분(diff)만 따로 패키징 하는 것이다. 결과적으로 Guest OS가 생기는 것이 아니기 때문에 훨씬 가볍다.
